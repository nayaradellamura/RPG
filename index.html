<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mini Aventura RPG</title>

  <link rel="icon" type="image/x-icon" href="img/favicon.ico">
  <link rel="stylesheet" href="css/style.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body>


<!-- Modal Inicial -->
<div id="modalInicio" class="modal-backdrop-custom">
  <div class="modal-content-custom text-center">
    <h2 class="mb-3">Bem-vindo Ã  Aventura RPG!</h2>
    <p class="mb-4">Digite o nome do seu personagem e escolha sua classe para comeÃ§ar.</p>
    <input type="text" id="nomePersonagem" class="form-control mb-3" placeholder="Nome do personagem" />

    <select id="classePersonagem" class="form-select mb-3" aria-label="Escolha a classe">
      <option value="" disabled selected>Escolha a classe</option>
      <option value="Guerreiro">Guerreiro</option>
      <option value="Cavaleiro">Cavaleiro</option>
      <option value="BÃ¡rbaro">BÃ¡rbaro</option>
      <option value="Druida">Druida</option>
      <option value="Bardo">Bardo</option>
      <option value="Mago">Mago</option>
      <option value="Ladino">Ladino</option>
      <option value="Arqueiro">Arqueiro</option>
    </select>

    <!-- EspaÃ§o para imagem da classe -->
    <div class="mb-3">
      <img id="imgClasse" src="" alt="Imagem da classe" style="max-width: 200px; border-radius: 8px; display: none;" />
    </div>

    <button id="btnComecar" class="btn btn-success btn-lg fw-bold w-100">ComeÃ§ar Aventura</button>
  </div>
</div>

<script>
  const imgClasse = document.getElementById('imgClasse');
  const selectClasse = document.getElementById('classePersonagem');

  selectClasse.addEventListener('change', () => {
    let src = '';
    switch (selectClasse.value) {
      case 'Guerreiro':
        src = 'img/guerreiro.jpg';  
        break;
      case 'Mago':
        src = 'img/mago.jpg';       
        break;
      case 'Ladino':
        src = 'img/ladino.jpg';     
        break;
      case 'Arqueiro':
        src = 'img/arqueiro.jpg';  
        break;
      case 'Cavaleiro':
        src = 'img/cavaleiro.jpg';  
      break;
      case 'BÃ¡rbaro':
        src = 'img/barbaro.jpg';  
      break;
      case 'Druida':
        src = 'img/druida.jpg';  
      break;
      case 'Bardo':
        src = 'img/bardo.jpg';  
      break;
      default:
        src = '';
    }

    if (src) {
      imgClasse.src = src;
      imgClasse.style.display = 'block';
    } else {
      imgClasse.style.display = 'none';
    }
  });
</script>


<!-- Fase 1 -->
<div id="fase1" class="modal-backdrop-custom">
  <div class="modal-content-custom fase-container">
    <div class="imagem-fase">
      <img src="img/taverna.jpg" alt="Taverna TrÃªs Facas" />
    </div>
    <div class="texto-fase">
      <h2>âš”ï¸ Fase 1 â€“ A Taverna e o Desafio</h2>
      <p><em>Narrador:</em></p>
      <p>VocÃª se acomoda em uma cadeira instÃ¡vel da Taverna TrÃªs Facas...</p>
      <p>O Taverneiro sem se apresentar, diz:<br>â€œPreciso de alguÃ©m com coragem ou falta de juÃ­zo...â€</p>
      <p><strong>Escolhas:</strong></p>
      <div class="d-grid gap-2 options mb-3">
        <button class="btn btn-success" onclick="escolherOpcao(1, 'Ouvir o plano inteiro, mas nÃ£o prometer nada.')">Ouvir o plano inteiro, mas nÃ£o prometer nada.</button>
        <button class="btn btn-success" onclick="escolherOpcao(1, 'Aceitar o trabalho, mas exigir metade do pagamento adiantado.')">Aceitar o trabalho, mas exigir metade do pagamento adiantado.</button>
        <button class="btn btn-success" onclick="escolherOpcao(1, 'Fingir interesse, sÃ³ para roubar o mapa depois.')">Fingir interesse, sÃ³ para roubar o mapa depois.</button>
      </div>
      <p id="resultado1" class="fs-5"></p>
      <div id="dadoGirando1" class="dado-girando" style="display:none;">ğŸ²</div>
      <button id="btnProximo1" class="btn-next" onclick="abrirFase(2)">PrÃ³ximo</button>
    </div>
  </div>
</div>

<!-- Fase 2 -->
<div id="fase2" class="modal-backdrop-custom">
  <div class="modal-content-custom fase-container">
    <div class="imagem-fase">
      <img src="img/encruzilhada.jpg" alt="Encruzilhada" />
    </div>
    <div class="texto-fase">
      <h2>ğŸŒ² Fase 2 â€“ A Encruzilhada</h2>
      <p><em>Narrador:</em></p>
      <p>ApÃ³s horas de viagem, vocÃª chega a uma encruzilhada mal sinalizada.</p>
      <p>Um lado leva pela trilha comercial, aberta, previsÃ­vel, cheia de olhos curiosos.<br>
      O outro cruza uma mata densa, rota de bandidos e feras, mas mais curta.<br>
      O tempo estÃ¡ contra vocÃª. E alguÃ©m parece te seguir.</p>
      <p><strong>Escolhas:</strong></p>
      <div class="d-grid gap-2 options mb-3">
        <button class="btn btn-success" onclick="escolherOpcao(2, 'Seguir pela mata, em silÃªncio.')">Seguir pela mata, em silÃªncio.</button>
        <button class="btn btn-success" onclick="escolherOpcao(2, 'Tomar a trilha aberta, mas disfarÃ§ado.')">Tomar a trilha aberta, mas disfarÃ§ado.</button>
        <button class="btn btn-success" onclick="escolherOpcao(2, 'Esperar e confrontar quem te segue.')">Esperar e confrontar quem te segue.</button>
      </div>
      <p id="resultado2" class="fs-5"></p>
      <div id="dadoGirando2" class="dado-girando" style="display:none;">ğŸ²</div>
      <button id="btnProximo2" class="btn-next" onclick="abrirFase(3)">PrÃ³ximo</button>
    </div>
  </div>
</div>


<!-- Fase 3 -->
<div id="fase3" class="modal-backdrop-custom">
  <div class="modal-content-custom fase-container">
    <div class="imagem-fase">
      <img src="img/dragao.jpg" alt="DragÃ£o GuardiÃ£o" />
    </div>
    <div class="texto-fase">
      <h2>ğŸ‰ Fase 3 â€“ O GuardiÃ£o</h2>
      <p><em>Narrador:</em></p>
      <p>A entrada da cripta estÃ¡ Ã  frente. Mas algo enorme bloqueia o caminho: um dragÃ£o antigo, de escamas opacas e olhar quase humano. Ele nÃ£o ataca. Apenas observa.</p>
      <p>VocÃª percebe: ele estÃ¡ cansado... ou entediado. O artefato estÃ¡ logo atrÃ¡s dele. SilÃªncio pesa no ar.</p>
      <p><strong>Escolhas:</strong></p>
      <div class="d-grid gap-2 options mb-3">
        <button class="btn btn-success" onclick="escolherOpcao(3, 'Falar com ele. Nada de bravatas, sÃ³ franqueza. E uma proposta.')">Falar com ele e fazer uma proposta.</button>
        <button class="btn btn-success" onclick="escolherOpcao(3, 'Esperar a noite cair e tentar passar despercebido.')">Esperar a noite cair e tentar passar despercebido.</button>
        <button class="btn btn-success" onclick="escolherOpcao(3, 'Atacar antes que ele reaja.')">Atacar antes que ele reaja.</button>
      </div>
      <p id="resultado3" class="fs-5"></p>
      <div id="dadoGirando3" class="dado-girando" style="display:none;">ğŸ²</div>
      <button id="btnProximo3" class="btn-next" onclick="finalizarAventura()">Finalizar Aventura</button>
    </div>
  </div>
</div>

<!-- Modal Final -->
<div id="modalFinal" class="modal-backdrop-custom" style="display:none;">
  <div class="modal-content-custom text-center">
    <h2>Aventura Finalizada!</h2>
    <p id="mensagemFinal" class="fs-5 mb-4"></p>
    <button class="btn btn-primary btn-lg" onclick="reiniciarJogo()">Jogar Novamente</button>
  </div>
</div>

<!-- Bootstrap JS Bundle -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script>
  let nome = '';
  let classe = '';

  window.onload = () => {
    mostrarModalInicio();
  };

  function mostrarModalInicio() {
    document.getElementById('modalInicio').style.display = 'flex';
    [1, 2, 3].forEach(i => {
      document.getElementById('fase' + i).style.display = 'none';
      document.getElementById('btnProximo' + i).style.display = 'none';
      document.getElementById('resultado' + i).textContent = '';
      const buttons = document.querySelectorAll(`#fase${i} .options button`);
      buttons.forEach(btn => btn.disabled = false);
    });
    document.getElementById('modalFinal').style.display = 'none';
  }

  document.getElementById('btnComecar').addEventListener('click', () => {
    const nomeInput = document.getElementById('nomePersonagem').value.trim();
    const classeSelect = document.getElementById('classePersonagem').value;

    if (!nomeInput) {
      alert('Por favor, digite o nome do personagem.');
      return;
    }
    if (!classeSelect) {
      alert('Por favor, escolha uma classe.');
      return;
    }

    nome = nomeInput;
    classe = classeSelect;

    document.getElementById('modalInicio').style.display = 'none';
    abrirFase(1);
  });

  function abrirFase(numero) {
    [1, 2, 3].forEach(i => {
      document.getElementById('fase' + i).style.display = 'none';
    });
    document.getElementById('fase' + numero).style.display = 'flex';
  }

// FunÃ§Ã£o para gerar nÃºmero aleatÃ³rio de 1 a 20 (dado d20)
function rolarDado() {
  return Math.floor(Math.random() * 20) + 1;
}

function escolherOpcao(fase, textoEscolha) {
  const resultado = document.getElementById('resultado' + fase);
  const dado = document.getElementById('dadoGirando' + fase);
  const btnProximo = document.getElementById('btnProximo' + fase);

  // Reset
  resultado.textContent = '';
  btnProximo.style.display = 'none';
  dado.style.display = 'flex';

  setTimeout(() => {
    dado.style.display = 'none';

    const rolagem = rolarDado();
    let tipo = '';

    if (rolagem === 1) {
      tipo = 'Falha crÃ­tica';
    } else if (rolagem <= 8) {
      tipo = 'Falha';
    } else if (rolagem <= 14) {
      tipo = 'Sucesso parcial';
    } else if (rolagem <= 19) {
      tipo = 'Sucesso';
    } else {
      tipo = 'Sucesso crÃ­tico';
    }

    // Determina a mensagem com base na fase
    let mensagem = '';
    if (fase === 1) {
      mensagem = resultadoFase1(textoEscolha, rolagem, tipo);
    } else if (fase === 2) {
      mensagem = resultadoFase2(textoEscolha, rolagem, tipo);
    } else if (fase === 3) {
      mensagem = resultadoFase3(textoEscolha, rolagem, tipo);
    }

    resultado.innerHTML = `
      VocÃª escolheu: <strong>${textoEscolha}</strong><br>
      Rolagem de dado: ğŸ² <strong>${rolagem}</strong><br>
      ${mensagem}
    `;

    btnProximo.style.display = 'inline-block';
  }, 1500);
}



// Ajusta as mensagens conforme novo esquema

function resultadoFase1(escolha, dado, tipo) {
  switch(tipo) {
    case 'Falha crÃ­tica':
      return 'VocÃª tropeÃ§a nas prÃ³prias botas e cai diante do taverneiro. Envergonhado, aceita a missÃ£o de graÃ§a, sob o riso dos presentes.';
    case 'Falha':
      return 'O taverneiro franze a testa e menciona uma dÃ­vida antiga. Sem escolha, vocÃª aceita realizar a missÃ£o sem pagamento.';
    case 'Sucesso parcial':
      return 'VocÃª aceita a missÃ£o, mas um mal-entendido no acordo pode te custar algo mais adiante.';
    case 'Sucesso':
      return 'Com postura firme, vocÃª conquista a confianÃ§a do taverneiro e segue para a missÃ£o sem impedimentos.';
    case 'Sucesso crÃ­tico':
      return 'Com um toque de sorte e palavras certeiras, vocÃª garante a missÃ£o e ainda receberÃ¡ em dobro pela ousadia.';
  }
}


function resultadoFase2(escolha, dado, tipo) {
  switch(tipo) {
    case 'Falha crÃ­tica':
      return 'VocÃª foi pego de surpresa! A situaÃ§Ã£o se agravou bastante, mas com esforÃ§o consegue seguir seu caminho, ainda que cambaleando.';
    case 'Falha':
      return 'Sua tentativa falhou, gerando contratempos que atrasam sua jornada e chamam atenÃ§Ã£o indesejada.';
    case 'Sucesso parcial':
      return 'VocÃª prosseguiu, mas enfrentou obstÃ¡culos inesperados que testaram sua determinaÃ§Ã£o.';
    case 'Sucesso':
      return 'VocÃª enfrentou o desafio com firmeza e seguiu pela trilha sem grandes dificuldades.';
    case 'Sucesso crÃ­tico':
      return 'Com astÃºcia e precisÃ£o, vocÃª encontrou uma soluÃ§Ã£o perfeita e avanÃ§ou como um verdadeiro herÃ³i.';
  }
}

function resultadoFase3(escolha, dado, tipo) {
  switch(tipo) {
    case 'Falha crÃ­tica':
      return 'Sua aÃ§Ã£o desastrosa trouxe um fim trÃ¡gico e prematuro Ã  sua jornada. As lendas nÃ£o cantarÃ£o seu nome.';
    case 'Falha':
      return 'VocÃª falhou neste momento, mas as chamas da esperanÃ§a ainda ardem, a aventura continua.';
    case 'Sucesso parcial':
      return 'VocÃª teve algum Ãªxito, mas as pedras no caminho ainda exigem coragem e cautela.';
    case 'Sucesso':
      return 'Com bravura e habilidade, vocÃª supera o desafio e avanÃ§a com honra.';
    case 'Sucesso crÃ­tico':
      return 'Uma vitÃ³ria digna dos bardos! Seu feito serÃ¡ contado em tavernas por muitas geraÃ§Ãµes.';
  }
}



function finalizarAventura() {
  // Esconder TODAS as fases, explicitamente
  [1, 2, 3].forEach(i => {
    document.getElementById('fase' + i).style.display = 'none';
  });

  // Exibe a modal final
  let msg = `Seus passos ecoam na histÃ³ria. Seja lenda, herÃ³i ou apenas memÃ³ria, sua jornada termina... por agora.

ğŸ’– Eu amo vocÃª! Feliz Dia dos Namorados ğŸ’–`;

document.getElementById("mensagemFinal").innerText = msg;
document.getElementById('modalFinal').style.display = 'flex';

  document.getElementById('modalFinal').style.display = 'flex';
}




  function reiniciarJogo() {
    nome = '';
    classe = '';
    document.getElementById('nomePersonagem').value = '';
    document.getElementById('classePersonagem').selectedIndex = 0;
    mostrarModalInicio();
  }
</script>

</body>
</html>
