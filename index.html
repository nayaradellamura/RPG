<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mini Aventura RPG</title>

  <link rel="icon" type="image/x-icon" href="img/favicon.ico">
  <link rel="stylesheet" href="css/style.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body>


<!-- Modal Inicial -->
<div id="modalInicio" class="modal-backdrop-custom">
  <div class="modal-content-custom text-center">
    <h2 class="mb-3">Bem-vindo à Aventura RPG!</h2>
    <p class="mb-4">Digite o nome do seu personagem e escolha sua classe para começar.</p>
    <input type="text" id="nomePersonagem" class="form-control mb-3" placeholder="Nome do personagem" />

    <select id="classePersonagem" class="form-select mb-3" aria-label="Escolha a classe">
      <option value="" disabled selected>Escolha a classe</option>
      <option value="Guerreiro">Guerreiro</option>
      <option value="Cavaleiro">Cavaleiro</option>
      <option value="Bárbaro">Bárbaro</option>
      <option value="Druida">Druida</option>
      <option value="Bardo">Bardo</option>
      <option value="Mago">Mago</option>
      <option value="Ladino">Ladino</option>
      <option value="Arqueiro">Arqueiro</option>
    </select>

    <!-- Espaço para imagem da classe -->
    <div class="mb-3">
      <img id="imgClasse" src="" alt="Imagem da classe" style="max-width: 200px; border-radius: 8px; display: none;" />
    </div>

    <button id="btnComecar" class="btn btn-success btn-lg fw-bold w-100">Começar Aventura</button>
  </div>
</div>

<script>
  const imgClasse = document.getElementById('imgClasse');
  const selectClasse = document.getElementById('classePersonagem');

  selectClasse.addEventListener('change', () => {
    let src = '';
    switch (selectClasse.value) {
      case 'Guerreiro':
        src = 'img/guerreiro.jpg';  
        break;
      case 'Mago':
        src = 'img/mago.jpg';       
        break;
      case 'Ladino':
        src = 'img/ladino.jpg';     
        break;
      case 'Arqueiro':
        src = 'img/arqueiro.jpg';  
        break;
      case 'Cavaleiro':
        src = 'img/cavaleiro.jpg';  
      break;
      case 'Bárbaro':
        src = 'img/barbaro.jpg';  
      break;
      case 'Druida':
        src = 'img/druida.jpg';  
      break;
      case 'Bardo':
        src = 'img/bardo.jpg';  
      break;
      default:
        src = '';
    }

    if (src) {
      imgClasse.src = src;
      imgClasse.style.display = 'block';
    } else {
      imgClasse.style.display = 'none';
    }
  });
</script>


<!-- Fase 1 -->
<div id="fase1" class="modal-backdrop-custom">
  <div class="modal-content-custom fase-container">
    <div class="imagem-fase">
      <img src="img/taverna.jpg" alt="Taverna Três Facas" />
    </div>
    <div class="texto-fase">
      <h2>⚔️ Fase 1 – A Taverna e o Desafio</h2>
      <p><em>Narrador:</em></p>
      <p>Você se acomoda em uma cadeira instável da Taverna Três Facas...</p>
      <p>O Taverneiro sem se apresentar, diz:<br>“Preciso de alguém com coragem ou falta de juízo...”</p>
      <p><strong>Escolhas:</strong></p>
      <div class="d-grid gap-2 options mb-3">
        <button class="btn btn-success" onclick="escolherOpcao(1, 'Ouvir o plano inteiro, mas não prometer nada.')">Ouvir o plano inteiro, mas não prometer nada.</button>
        <button class="btn btn-success" onclick="escolherOpcao(1, 'Aceitar o trabalho, mas exigir metade do pagamento adiantado.')">Aceitar o trabalho, mas exigir metade do pagamento adiantado.</button>
        <button class="btn btn-success" onclick="escolherOpcao(1, 'Fingir interesse, só para roubar o mapa depois.')">Fingir interesse, só para roubar o mapa depois.</button>
      </div>
      <p id="resultado1" class="fs-5"></p>
      <div id="dadoGirando1" class="dado-girando" style="display:none;">🎲</div>
      <button id="btnProximo1" class="btn-next" onclick="abrirFase(2)">Próximo</button>
    </div>
  </div>
</div>

<!-- Fase 2 -->
<div id="fase2" class="modal-backdrop-custom">
  <div class="modal-content-custom fase-container">
    <div class="imagem-fase">
      <img src="img/encruzilhada.jpg" alt="Encruzilhada" />
    </div>
    <div class="texto-fase">
      <h2>🌲 Fase 2 – A Encruzilhada</h2>
      <p><em>Narrador:</em></p>
      <p>Após horas de viagem, você chega a uma encruzilhada mal sinalizada.</p>
      <p>Um lado leva pela trilha comercial, aberta, previsível, cheia de olhos curiosos.<br>
      O outro cruza uma mata densa, rota de bandidos e feras, mas mais curta.<br>
      O tempo está contra você. E alguém parece te seguir.</p>
      <p><strong>Escolhas:</strong></p>
      <div class="d-grid gap-2 options mb-3">
        <button class="btn btn-success" onclick="escolherOpcao(2, 'Seguir pela mata, em silêncio.')">Seguir pela mata, em silêncio.</button>
        <button class="btn btn-success" onclick="escolherOpcao(2, 'Tomar a trilha aberta, mas disfarçado.')">Tomar a trilha aberta, mas disfarçado.</button>
        <button class="btn btn-success" onclick="escolherOpcao(2, 'Esperar e confrontar quem te segue.')">Esperar e confrontar quem te segue.</button>
      </div>
      <p id="resultado2" class="fs-5"></p>
      <div id="dadoGirando2" class="dado-girando" style="display:none;">🎲</div>
      <button id="btnProximo2" class="btn-next" onclick="abrirFase(3)">Próximo</button>
    </div>
  </div>
</div>


<!-- Fase 3 -->
<div id="fase3" class="modal-backdrop-custom">
  <div class="modal-content-custom fase-container">
    <div class="imagem-fase">
      <img src="img/dragao.jpg" alt="Dragão Guardião" />
    </div>
    <div class="texto-fase">
      <h2>🐉 Fase 3 – O Guardião</h2>
      <p><em>Narrador:</em></p>
      <p>A entrada da cripta está à frente. Mas algo enorme bloqueia o caminho: um dragão antigo, de escamas opacas e olhar quase humano. Ele não ataca. Apenas observa.</p>
      <p>Você percebe: ele está cansado... ou entediado. O artefato está logo atrás dele. Silêncio pesa no ar.</p>
      <p><strong>Escolhas:</strong></p>
      <div class="d-grid gap-2 options mb-3">
        <button class="btn btn-success" onclick="escolherOpcao(3, 'Falar com ele. Nada de bravatas, só franqueza. E uma proposta.')">Falar com ele e fazer uma proposta.</button>
        <button class="btn btn-success" onclick="escolherOpcao(3, 'Esperar a noite cair e tentar passar despercebido.')">Esperar a noite cair e tentar passar despercebido.</button>
        <button class="btn btn-success" onclick="escolherOpcao(3, 'Atacar antes que ele reaja.')">Atacar antes que ele reaja.</button>
      </div>
      <p id="resultado3" class="fs-5"></p>
      <div id="dadoGirando3" class="dado-girando" style="display:none;">🎲</div>
      <button id="btnProximo3" class="btn-next" onclick="finalizarAventura()">Finalizar Aventura</button>
    </div>
  </div>
</div>

<!-- Modal Final -->
<div id="modalFinal" class="modal-backdrop-custom" style="display:none;">
  <div class="modal-content-custom text-center">
    <h2>Aventura Finalizada!</h2>
    <p id="mensagemFinal" class="fs-5 mb-4"></p>
    <button class="btn btn-primary btn-lg" onclick="reiniciarJogo()">Jogar Novamente</button>
  </div>
</div>

<!-- Bootstrap JS Bundle -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script>
  let nome = '';
  let classe = '';

  window.onload = () => {
    mostrarModalInicio();
  };

  function mostrarModalInicio() {
    document.getElementById('modalInicio').style.display = 'flex';
    [1, 2, 3].forEach(i => {
      document.getElementById('fase' + i).style.display = 'none';
      document.getElementById('btnProximo' + i).style.display = 'none';
      document.getElementById('resultado' + i).textContent = '';
      const buttons = document.querySelectorAll(`#fase${i} .options button`);
      buttons.forEach(btn => btn.disabled = false);
    });
    document.getElementById('modalFinal').style.display = 'none';
  }

  document.getElementById('btnComecar').addEventListener('click', () => {
    const nomeInput = document.getElementById('nomePersonagem').value.trim();
    const classeSelect = document.getElementById('classePersonagem').value;

    if (!nomeInput) {
      alert('Por favor, digite o nome do personagem.');
      return;
    }
    if (!classeSelect) {
      alert('Por favor, escolha uma classe.');
      return;
    }

    nome = nomeInput;
    classe = classeSelect;

    document.getElementById('modalInicio').style.display = 'none';
    abrirFase(1);
  });

  function abrirFase(numero) {
    [1, 2, 3].forEach(i => {
      document.getElementById('fase' + i).style.display = 'none';
    });
    document.getElementById('fase' + numero).style.display = 'flex';
  }

// Função para gerar número aleatório de 1 a 20 (dado d20)
function rolarDado() {
  return Math.floor(Math.random() * 20) + 1;
}

function escolherOpcao(fase, textoEscolha) {
  const resultado = document.getElementById('resultado' + fase);
  const dado = document.getElementById('dadoGirando' + fase);
  const btnProximo = document.getElementById('btnProximo' + fase);

  // Reset
  resultado.textContent = '';
  btnProximo.style.display = 'none';
  dado.style.display = 'flex';

  setTimeout(() => {
    dado.style.display = 'none';

    const rolagem = rolarDado();
    let tipo = '';

    if (rolagem === 1) {
      tipo = 'Falha crítica';
    } else if (rolagem <= 8) {
      tipo = 'Falha';
    } else if (rolagem <= 14) {
      tipo = 'Sucesso parcial';
    } else if (rolagem <= 19) {
      tipo = 'Sucesso';
    } else {
      tipo = 'Sucesso crítico';
    }

    // Determina a mensagem com base na fase
    let mensagem = '';
    if (fase === 1) {
      mensagem = resultadoFase1(textoEscolha, rolagem, tipo);
    } else if (fase === 2) {
      mensagem = resultadoFase2(textoEscolha, rolagem, tipo);
    } else if (fase === 3) {
      mensagem = resultadoFase3(textoEscolha, rolagem, tipo);
    }

    resultado.innerHTML = `
      Você escolheu: <strong>${textoEscolha}</strong><br>
      Rolagem de dado: 🎲 <strong>${rolagem}</strong><br>
      ${mensagem}
    `;

    btnProximo.style.display = 'inline-block';
  }, 1500);
}



// Ajusta as mensagens conforme novo esquema

function resultadoFase1(escolha, dado, tipo) {
  switch(tipo) {
    case 'Falha crítica':
      return 'Você tropeça nas próprias botas e cai diante do taverneiro. Envergonhado, aceita a missão de graça, sob o riso dos presentes.';
    case 'Falha':
      return 'O taverneiro franze a testa e menciona uma dívida antiga. Sem escolha, você aceita realizar a missão sem pagamento.';
    case 'Sucesso parcial':
      return 'Você aceita a missão, mas um mal-entendido no acordo pode te custar algo mais adiante.';
    case 'Sucesso':
      return 'Com postura firme, você conquista a confiança do taverneiro e segue para a missão sem impedimentos.';
    case 'Sucesso crítico':
      return 'Com um toque de sorte e palavras certeiras, você garante a missão e ainda receberá em dobro pela ousadia.';
  }
}


function resultadoFase2(escolha, dado, tipo) {
  switch(tipo) {
    case 'Falha crítica':
      return 'Você foi pego de surpresa! A situação se agravou bastante, mas com esforço consegue seguir seu caminho, ainda que cambaleando.';
    case 'Falha':
      return 'Sua tentativa falhou, gerando contratempos que atrasam sua jornada e chamam atenção indesejada.';
    case 'Sucesso parcial':
      return 'Você prosseguiu, mas enfrentou obstáculos inesperados que testaram sua determinação.';
    case 'Sucesso':
      return 'Você enfrentou o desafio com firmeza e seguiu pela trilha sem grandes dificuldades.';
    case 'Sucesso crítico':
      return 'Com astúcia e precisão, você encontrou uma solução perfeita e avançou como um verdadeiro herói.';
  }
}

function resultadoFase3(escolha, dado, tipo) {
  switch(tipo) {
    case 'Falha crítica':
      return 'Sua ação desastrosa trouxe um fim trágico e prematuro à sua jornada. As lendas não cantarão seu nome.';
    case 'Falha':
      return 'Você falhou neste momento, mas as chamas da esperança ainda ardem, a aventura continua.';
    case 'Sucesso parcial':
      return 'Você teve algum êxito, mas as pedras no caminho ainda exigem coragem e cautela.';
    case 'Sucesso':
      return 'Com bravura e habilidade, você supera o desafio e avança com honra.';
    case 'Sucesso crítico':
      return 'Uma vitória digna dos bardos! Seu feito será contado em tavernas por muitas gerações.';
  }
}



function finalizarAventura() {
  // Esconder TODAS as fases, explicitamente
  [1, 2, 3].forEach(i => {
    document.getElementById('fase' + i).style.display = 'none';
  });

  // Exibe a modal final
  let msg = `Seus passos ecoam na história. Seja lenda, herói ou apenas memória, sua jornada termina... por agora.

💖 Eu amo você! Feliz Dia dos Namorados 💖`;

document.getElementById("mensagemFinal").innerText = msg;
document.getElementById('modalFinal').style.display = 'flex';

  document.getElementById('modalFinal').style.display = 'flex';
}




  function reiniciarJogo() {
    nome = '';
    classe = '';
    document.getElementById('nomePersonagem').value = '';
    document.getElementById('classePersonagem').selectedIndex = 0;
    mostrarModalInicio();
  }
</script>

</body>
</html>
